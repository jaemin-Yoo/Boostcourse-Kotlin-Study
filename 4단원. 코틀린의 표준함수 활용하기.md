### 클로저
- 람다식으로 표현된 내부 함수에서 외부 범위에 선언된 변수에 접근할 수 있는 개념
- 값을 가져오기 때문에 참조형식으로 되어있음
- 람다식 안에 있는 외부 변수는 값을 유지하기 위해 람다가 포획한 변수

```kotlin
fun main() {
    val calc = Calc()
    var result = 0 // 외부 변수
    calc.addNum(2, 3) { x, y -> result = x + y } // 클로저
    println(result) // 값을 유지하여 5가 출력
}

class Calc {
    fun addNum(a: Int, b: Int, add: (Int, Int) -> Unit) {
        add(a, b)
    }
}
```
람다식 외부 범위 변수에 접근

<br>

```kotlin
// 길이가 일치하는 이름만 반환
fun filteredNames(length: Int) {
    val names = arrayListOf("Kim", "Yoo", "Hong")
    val filterResult = names.filter {
        it.length == length // 바깥의 length에 접근
    }
    println(filterResult)
}
```
함수 자체를 같이 포획해 해당 매개변수에 접근

---

## 코틀린 표준 라이브러리
- let(), apply(), with(), also(), run()
- 대략 확장 함수 형태의 람다식으로 구성

### let()
```kotlin
val score: Int? = 32
score?.let { println(it) }

// 32
```
- null일 경우 람다식 내부 함수 동작 x

### let 함수 체이닝
```kotlin
var a = 1
val b = 2

a = a.let { it + 2 }.let {
    println("a = $a") // 1
    val i = it + b
    i
}
println(a) // 5
```

### let 중첩
```kotlin
var x = "Kotlin!"
x.let { outer -> 
    outer.let { inner ->
        print("Inner is $inner and outer is $outer")
    }
}
```

<br>

- 반환값은 바깥쪽의 람다식에만 적용
```kotlin
var x = "Kotlin!"
x.let { outer -> 
    outer.let { inner ->
        print("Inner is $inner and outer is $outer")
        "Inner String" // 이것은 반환되지 않음
    }
    "Outer String" // 이 문자열이 반환되어 x에 할당
}
```

### 커스텀 뷰에서 let 활용
- 기존 코드
```kotlin
val padding = applyDimension().toInt()
setPadding(padding, 0, padding, 0)
```

- let 활용 코드
```kotlin
applyDimension().let {
    setPadding(it, 0, it, 0)
}
```

### null 검사
- Safe call(?.)과 let을 함께 사용
```kotlin
obj?.let { println(it) } // null 이 아닐 때 수행
```

### else문 포함 let 활용
```kotlin
obj?.let { println(it) } ?: println("null")
```